[Unit]
Description=QuantumFS
Requires=network-online.target
After=network-online.target

[Service]
Type=simple
ExecStartPre=/bin/mkdir -p /dev/shm/quantumfs /qfs
ExecStart=/usr/sbin/quantumfsd \
	  -datastore ether.cql -datastoreconf /etc/quantumfsd.conf \
	  -workspaceDB ether.cql -workspaceDBconf /etc/quantumfsd.conf
ExecStop=/usr/bin/fusermount -u /qfs
ExecStop=/bin/bash -c 'while grep -q QuantumFS /proc/self/mountinfo; do sleep 1; done'
User=root

[Install]
WantedBy=multi-user.target
